import { ITask } from '../../../store/task/task.entity';
import cn from 'classnames';
import styles from './Task.module.scss';
import useTask from '../../../store/task/task.hooks';
import useHover from '../../../hooks/useHover';
import { useRef } from 'react';


type TaskPropsType = {
	task: ITask;
}

export const Task = ({ task }: TaskPropsType) => {
	const ref = useRef(null);
	const { removeTask } = useTask();
	const isHovering = useHover(ref);

	const TaskStyles = cn(
		styles.task,
		isHovering && styles.task_hover
	)

	return <div ref={ref} className={TaskStyles}>
		<span className={styles.task__complete}>
			<span onClick={() => removeTask(task.id)}>
				<svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path d="M13 26C5.8201 26 0 20.1799 0 13C0 5.8201 5.8201 0 13 0C20.1799 0 26 5.8201 26 13C26 20.1799 20.1799 26 13 26ZM13 23.4C15.7583 23.4 18.4035 22.3043 20.3539 20.3539C22.3043 18.4035 23.4 15.7583 23.4 13C23.4 10.2417 22.3043 7.59647 20.3539 5.64609C18.4035 3.69571 15.7583 2.6 13 2.6C10.2417 2.6 7.59647 3.69571 5.64609 5.64609C3.69571 7.59647 2.6 10.2417 2.6 13C2.6 15.7583 3.69571 18.4035 5.64609 20.3539C7.59647 22.3043 10.2417 23.4 13 23.4Z" fill="#A3A8B8" />
				</svg>
			</span>
		</span>
		<div className={styles.task__content}>
			<span className={styles.task__name}>{task.title}</span>
			<div className={styles.task__icons}>
				<span>
					<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path d="M12.6699 6.37796C12.44 6.14462 12.16 5.94239 11.9001 5.74016C11.2302 5.27348 10.4703 4.93903 9.83046 4.44902C8.34073 3.31343 8.01079 1.43893 8.96062 0C8.01079 0.178894 7.18094 0.58335 6.47107 1.0267C3.88155 2.64452 2.86173 5.49905 4.08151 7.94912C4.1215 8.0269 4.16149 8.10468 4.16149 8.20579C4.16149 8.37691 4.01152 8.53247 3.81156 8.59469C3.5816 8.67247 3.34165 8.6258 3.15168 8.50135C3.09459 8.46464 3.04708 8.41975 3.01171 8.36913C1.88191 7.25687 1.70194 5.66238 2.46181 4.38679C0.792111 5.4446 -0.117722 7.23354 0.0122545 8.92137C0.0722435 9.31027 0.132232 9.69917 0.302201 10.0881C0.442176 10.5547 0.712126 11.0214 1.01207 11.4337C2.09187 12.7793 3.96153 13.7437 5.97116 13.9382C8.11077 14.1482 10.4004 13.8448 12.0401 12.6937C13.8697 11.4025 14.5096 9.3336 13.5698 7.56022L13.4398 7.35799C13.2298 7.0002 12.6699 6.37796 12.6699 6.37796ZM9.51052 11.2781C9.23057 11.4648 8.77065 11.667 8.41072 11.7448C7.29092 12.0559 6.17113 11.6203 5.51125 11.107C6.70103 10.8892 7.4109 10.2047 7.62086 9.51249C7.79083 8.89025 7.47089 8.37691 7.34091 7.778C7.22093 7.20243 7.24093 6.71241 7.51088 6.17573C7.70085 6.4713 7.90081 6.76686 8.14077 7.0002C8.91063 7.778 10.1204 8.12023 10.3804 9.17804C10.4203 9.28693 10.4403 9.39582 10.4403 9.51249C10.4703 10.1503 10.1104 10.8503 9.51052 11.2781Z" fill="#F5B82E" />
					</svg>
				</span>
				<span>
					<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path d="M7 14C7.48168 14.0005 7.95158 13.866 8.34438 13.6151C8.73718 13.3642 9.03337 13.0094 9.19178 12.6H4.80822C4.96663 13.0094 5.26282 13.3642 5.65562 13.6151C6.04842 13.866 6.51832 14.0005 7 14ZM12.4444 8.8102V5.6C12.4444 3.3481 10.745 1.4511 8.44278 0.8806C8.21489 0.364 7.658 0 7 0C6.342 0 5.78511 0.364 5.55722 0.8806C3.255 1.4518 1.55556 3.3481 1.55556 5.6V8.8102L0.22789 10.0051C0.155523 10.07 0.0981327 10.1471 0.059022 10.2321C0.0199112 10.317 -0.000147349 10.4081 8.14857e-07 10.5V11.2C8.14857e-07 11.3857 0.081945 11.5637 0.227807 11.695C0.373668 11.8262 0.571499 11.9 0.777779 11.9H13.2222C13.4285 11.9 13.6263 11.8262 13.7722 11.695C13.9181 11.5637 14 11.3857 14 11.2V10.5C14.0001 10.4081 13.9801 10.317 13.941 10.2321C13.9019 10.1471 13.8445 10.07 13.7721 10.0051L12.4444 8.8102Z" fill="#A3A8B8" />
					</svg>
				</span>
			</div>
		</div>
		<span className={styles.task__tags}>tags</span>
		<div className={styles.task__date}>
			<div>22.04.2022</div>
			<div>выполинть до</div>
		</div>
		<span className={styles.task__control}>
			<svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">
				<path fill-rule="evenodd" clip-rule="evenodd" d="M15.4213 1.90128C14.8038 -0.63376 11.1962 -0.63376 10.5787 1.90128C10.4865 2.28221 10.3056 2.63599 10.0509 2.93384C9.79614 3.23168 9.47466 3.46517 9.11263 3.61531C8.75059 3.76544 8.35822 3.82798 7.96744 3.79783C7.57667 3.76768 7.19853 3.6457 6.86381 3.4418C4.63424 2.08328 2.08291 4.63457 3.44145 6.86411C4.31898 8.30388 3.54058 10.1824 1.90253 10.5805C-0.634176 11.1964 -0.634176 14.8056 1.90253 15.4199C2.28357 15.5122 2.63742 15.6932 2.93527 15.9481C3.23311 16.2031 3.46654 16.5247 3.61653 16.887C3.76653 17.2492 3.82885 17.6417 3.79842 18.0326C3.768 18.4235 3.64569 18.8016 3.44145 19.1363C2.08291 21.3658 4.63424 23.9171 6.86381 22.5586C7.19847 22.3544 7.57664 22.2321 7.96752 22.2016C8.3584 22.1712 8.75094 22.2335 9.11317 22.3835C9.4754 22.5335 9.79709 22.7669 10.052 23.0648C10.307 23.3626 10.488 23.7165 10.5803 24.0975C11.1962 26.6342 14.8054 26.6342 15.4197 24.0975C15.5123 23.7167 15.6935 23.3631 15.9485 23.0654C16.2035 22.7678 16.5251 22.5345 16.8873 22.3846C17.2494 22.2346 17.6418 22.1722 18.0326 22.2025C18.4233 22.2327 18.8015 22.3547 19.1362 22.5586C21.3658 23.9171 23.9171 21.3658 22.5585 19.1363C22.3547 18.8016 22.2327 18.4234 22.2024 18.0327C22.1722 17.6419 22.2346 17.2495 22.3845 16.8874C22.5345 16.5253 22.7677 16.2037 23.0654 15.9487C23.363 15.6937 23.7166 15.5125 24.0975 15.4199C26.6342 14.804 26.6342 11.1948 24.0975 10.5805C23.7164 10.4882 23.3626 10.3072 23.0647 10.0523C22.7669 9.79735 22.5335 9.47566 22.3835 9.11343C22.2335 8.75121 22.1712 8.35867 22.2016 7.9678C22.232 7.57693 22.3543 7.19876 22.5585 6.86411C23.9171 4.63457 21.3658 2.08328 19.1362 3.4418C18.8015 3.64604 18.4234 3.76835 18.0325 3.79877C17.6416 3.8292 17.2491 3.76687 16.8868 3.61688C16.5246 3.46689 16.2029 3.23347 15.948 2.93563C15.693 2.63778 15.512 2.28394 15.4197 1.9029L15.4213 1.90128ZM13 17.8753C14.293 17.8753 15.533 17.3617 16.4473 16.4474C17.3615 15.5331 17.8752 14.2932 17.8752 13.0002C17.8752 11.7073 17.3615 10.4673 16.4473 9.553C15.533 8.63875 14.293 8.12513 13 8.12513C11.707 8.12513 10.467 8.63875 9.55275 9.553C8.63848 10.4673 8.12485 11.7073 8.12485 13.0002C8.12485 14.2932 8.63848 15.5331 9.55275 16.4474C10.467 17.3617 11.707 17.8753 13 17.8753Z" fill="#A3A8B8" />
			</svg>
		</span>
	</div>
} 